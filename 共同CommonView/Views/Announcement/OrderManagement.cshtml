@{
    Layout = "~/Views/Shared/_Index.cshtml";
}
<style>
    .modeldetail {
        border: 1px solid #aaa;
        padding: 5px;
        margin-bottom: 3px;
        color: #333;
    }

    .modeldetail-title {
        font-size: 16px;
        padding-left: 3px;
        color: #000;
    }

    .modeldetail-cont span {
        display: inline-block;
        box-sizing: border-box;
        width: 350px;
        padding: 8px 5px;
    }

    ul, li {
        list-style: none;
    }

    .BasicInformation, .PayInformation {
        width: 100%;
        height: auto;
    }

    .title1 {
        height: 30px;
        background-image: url('../../../../Content/assets/images/title.png');
        background-size: 125px 30px;
        background-position: left bottom;
        background-repeat: no-repeat;
        margin-bottom: 3px;
        margin-top: 3px;
        line-height: 30px;
        text-indent: 20px;
        font-size: 2.2em;
        color: #fff;
    }

    .Down {
        display: block;
        position: absolute;
        right: 10px;
        top: 4px;
        font-size: 3.4em;
        color: #4175bb;
    }

        .Down img {
            width: 30px;
            height: 30px;
        }

    .form-inline {
        width: 100%;
        height: auto;
    }

        .form-inline:after {
            content: ".";
            visibility: hidden;
            display: block;
            height: 0px;
            clear: both;
        }

    .boder {
        box-shadow: 1px 0px 2px #9a9696;
        border: 1px solid #abb3b9;
        background-color: #eff2f5;
        border-left: 0px;
    }

    .turn {
        transform: rotate(180deg);
        -ms-transform: rotate(180deg); /* IE 9 */
        -webkit-transform: rotate(180deg); /* Safari and Chrome */
    }

    #tab li {
        list-style: none;
        border: 1px solid #7692cb;
        background: #fff;
        padding: 2px 5px;
        width: 85px;
        text-align: center;
        line-height: 20px;
        cursor: pointer;
    }

        #tab li.tabactive {
            background: #3b9de1;
            color: #fff;
        }

    .replyType {
        padding-top: 5px;
    }

    .model-tab-cont {
        padding: 5px;
    }
    .New {
       padding:5px;
       background-color:#3a9de1;
       color:#fff;
    }
    /*.dataTables_scrollBody ,.dataTables_scroll{
      height:284px !important;
    }*/
</style>
<div id="app">
    <div class="row m-0">
        <div class="col-md-12 col-sm-12 pl-5 pr-5">
            <form class="form-inline" id="searchForm">
                <div id="order_8" class="form-group show-order pull-left">
                    <erp-text v_id="number">单号</erp-text>
                </div>
                <div id="order_8" class="form-group show-order pull-left">
                    <erp-datedb v_id="zdrq" v-model="zdrq">提醒日期</erp-datedb>
                </div>
            </form>
        </div>
        <div class="col-md-12 p-0 col-sm-12">
                @*<erp-edit-table class="edit-top" v-bind:columrender="columrender" v-model="S_Menu.S_Button_List" v_id="OrderFormDetailList" v-bind:row_edit_callback="rowEditCallback" v-bind:row_edit_blur_callback="rowEditBlurCallback" v-bind:columheaderseach="columHeaderSeach"></erp-edit-table>*@
                <div id="div_table_orderForm" class="table">
                    <table id="orderForm" style="float: left;" class="display cell-border" cellspacing="0" width="100%">
                        <thead class="head_bg">
                            <tr>
                                <th class="td_Align_center sorting_disabled" style="width: 0px;" aria-label="行号"><i class="fa fa-gear" style="font-size: 15px;"></i></th>
                                <th class="details-control sorting_disabled" style="width:0px;"></th>
                                <th>单号</th>
                                <th>提醒日期</th>
                                <th>提醒内容</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="td_Align_center">1</td>
                                <td class="details-control"></td>
                                <td style="text-align:center !important;">ES667304765 <img src="~/Content/assets/images/New.gif" style="width:27px;"/> <a class="menuItem" data-id="49F61713-C1E4-420E-BEEC-23232333333312" href="/CustomerRelations/CustomerChange/Detail" data-index="1000">审核</a></td>
                                <td style="text-align:center !important;">2018-7-9  </td>
                                <td style="text-align:center !important;">开票详细内容 </td>
                            </tr>
                            <tr>
                                <td class="td_Align_center">2</td>
                                <td class="details-control"></td>
                                <td style="text-align:center !important;">ES667304765 <img src="~/Content/assets/images/New.gif" style="width:27px;"/> </td>
                                <td style="text-align:center !important;">2018-7-9  </td>
                                <td style="text-align:center !important;">开票详细内容 </td>
                            </tr>
                            <tr>
                                <td class="td_Align_center">3</td>
                                <td class="details-control"></td>
                                <td style="text-align:center !important;">ES667304765 <img src="~/Content/assets/images/New.gif" style="width:27px;"/> </td>
                                <td style="text-align:center !important;">2018-7-9  </td>
                                <td style="text-align:center !important;">开票详细内容 </td>
                            </tr>
                            
                        </tbody>
                        
                    </table>
                </div>
            </div>
        </div>
    
</div>

<script type="text/x-handlebars-template" id="table_test">
    <table id="test" class="display" cellspacing="0" width="100%">
        <thead class="head_bg">
            <tr>
                <th class="td_Align_center sorting_disabled" style="width: 0px;" aria-label="行号"><i class="fa fa-gear" style="font-size: 15px;"></i></th>
                <th style="width:100px !important;">审批人</th>
                <th style="width:150px !important">审批时间</th>
                <th style="width:150px !important">审批结果</th>
                <th style="width:150px !important">审批意见</th>

            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="td_Align_center">1</td>
                <td style="text-align:center !important;">张丽丽 </td>
                <td style="text-align:center !important;">2017-9-8</td>
                <td style="text-align:center !important;">已通过</td>
                <td style="text-align:center !important;">可以完成</td>
            </tr>
            <tr>
                <td class="td_Align_center">2</td>
                <td style="text-align:center !important;">王芳芳 </td>
                <td style="text-align:center !important;">2017-11-18</td>
                <td style="text-align:center !important;">未通过</td>
                <td style="text-align:center !important;">可以完成</td>
            </tr>
        </tbody>

    </table>
</script>
<script src="../../Content/assets/js/myown/tabs.js"></script>
<script>
    $(document).ready(function () {
        var vm = $('#orderForm').DataTable({
            "select": true,
            "autoWidth": false,
            "sScrollX": true,
            "sScrollXInner": 800,
            "dom": 'rt<"tableBottom clearfix"<"pull-left"l>p<"pull-right ml-10 mr-10"i><"toolbar mr-10 pull-right">>',
            //"paging": false,//不分页
            "searching": false,
            "sScrollY": true,
           
            "language": {
                "sProcessing": "处理中...",
                "sLengthMenu": "显示 _MENU_ 项结果",
                "sZeroRecords": "没有匹配结果",
                "sInfo": "显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",
                "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                "sInfoPostFix": "",
                "sSearch": "搜索:",
                "sUrl": "",
                "sEmptyTable": "查询的数据不存在！",
                "sLoadingRecords": "载入中...",
                "sInfoThousands": ",",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "上页",
                    "sNext": "下页",
                    "sLast": "末页"
                },
                "oAria": {
                    "sSortAscending": ": 以升序排列此列",
                    "sSortDescending": ": 以降序排列此列"
                }
            },

        });
        //$("div.toolbar").html("<div style='font-size:12px;color:#333;padding-top:3px;'>跳转到第<input type='text' style='width:30px;height:20px;margin:0 5px 0 5px;'/>页<span style='color:#fff;font-size:12px;cursor: pointer;margin-left:10px;padding:2px 3px;' class='btn-primary'>跳转</span><div>")
        $(".dataTables_scrollBody").height(250);
        $("#div_table_orderForm .dataTables_scrollBody").height(241);
        PageCommon.RefreshTablePage("orderForm");


        $('#orderForm tbody').on('click', 'td.details-control', function () {



            var tr = $(this).closest('tr');

            var row = vm.row(tr);
            tr.attr("id", row.index());

            if (row.child.isShown()) {
                row.child.hide();
                tr.removeClass('shown');
                $("#orderForm_wrapper .DTFC_LeftBodyWrapper").show();
            } else {

                $("#" + row.index()).addClass("shown");

                var $table = $($("#table_test").html());
                $table.attr("id", "mendetial_" + row.index());


                row.child($table[0]).show();


                var childTable = $table.DataTable({
                    "select": true,
                    "autoWidth": false,
                    "sScrollX": true,
                    "sScrollXInner": 400,
                    "info": "false",
                    "paging": false,//不分页
                    "dom": 'rt',
                    "searching": false,
                    "sScrollY": true,

                    "language": {
                        "sProcessing": "处理中...",
                        "sLengthMenu": "显示 _MENU_ 项结果",
                        "sZeroRecords": "没有匹配结果",
                        "sInfo": "显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",
                        "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                        "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                        "sInfoPostFix": "",
                        "sSearch": "搜索:",
                        "sUrl": "",
                        "sEmptyTable": "查询的数据不存在！",
                        "sLoadingRecords": "载入中...",
                        "sInfoThousands": ",",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": "上页",
                            "sNext": "下页",
                            "sLast": "末页"
                        },
                        "oAria": {
                            "sSortAscending": ": 以升序排列此列",
                            "sSortDescending": ": 以降序排列此列"
                        }
                    },


                });
                $(childTable.table().container()).width(400);
                //$("#orderForm").find(" .dataTables_scrollBody").css("padding-bottom", "28px");
                $("#orderForm_wrapper .DTFC_LeftBodyWrapper").hide();

            }
        });

        

    });
</script>

<script>
    //菜单主键
    var keyValue = PageCommon.Request("keyValue");
    var menu_vue = new Vue({
        el: '#app',
        data: {
            zdrq:'',
        },
        mounted: function () {

            //控件拖动
            $('.form-group').arrangeable({
                dragSelector: '.space'
            });
            $('.form-group').arrangeable({
                dragSelector: '.shade_Bg'
            });
            $("#searchForm").on("drag.end.arrangeable", function (sender, dragElement) {
                //console.log(b)
                //console.log(c);
            });
            if (keyValue) {
                PageCommon.GetFormData({
                    url: "EditSeach",
                    param: { keyValue: [keyValue] }
                    , success: function (data) {
                        menu_vue.S_Menu = data;
                    }
                });
            }
        },
        methods: {
            
        }
    });
</script>
